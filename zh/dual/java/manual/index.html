<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="tataba">
  
  <link rel="shortcut icon" href="../../../../favicon.ico">
  
  <title>1.开发前必读 - Onbon Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../../css/theme.css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../../../css/my.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "1.\u5f00\u53d1\u524d\u5fc5\u8bfb";
    var mkdocs_page_input_path = "zh\\dual\\java\\manual.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> Onbon Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../..">主页</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../y/y/">全彩系列</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../dual/">单双色系列</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../k/k/">字库系列</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../../about/">关于我们</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">Onbon Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
    
    <li>1.开发前必读</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/onbonlab/onbonlab.github.io.git/edit/master/docs/zh/dual/java/manual.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="1">1.开发前必读<a class="headerlink" href="#1" title="Permanent link">&para;</a></h1>
<h2 id="11">1.1 控制器型号选择<a class="headerlink" href="#11" title="Permanent link">&para;</a></h2>
<p>本说明只适用于BX系列五代六代控制卡（不包括字库卡），例如：BX-5E1、BX-5M1、BX-6E1X等，其中BX-5E1、BX-5E2、BX-5E3支持动态区（4个），BX-6E1、BX-6E2、BX-6E1X、BX-6E2X、BX-6Q系列支持动态区（32个）。</p>
<h2 id="12">1.2 关于动态区<a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<p>根据存储介质的不同，我们将控制器上现实的内容分为两类：普通节目（数据存储在flash中）和动态区（数据存储在ram中）。普通节目可以包括各种区域：时间区、传感器区、图文区等。</p>
<p>普通节目，会被存储在控制器的flash中，其内容掉电不丢失，但是因为flash存储器擦写寿命只有十万次，所以，其不能用于更新频率很高的场合，例如：停车场车位信息，外部传感器状态的实时更新，车次状态的实时更新等。</p>
<p>动态区完全独立于普通节目，其内容可以按区域进行单独更新，它可以与普通节目一起播放，也可以单独播放，它最大的特点是内容存储在ram中，没有擦写次数限制，内容掉电不保存，通常用于信息更新频繁场合。</p>
<h2 id="13">1.3 准备工作<a class="headerlink" href="#13" title="Permanent link">&para;</a></h2>
<p>在进行开发之前，请使用通用软件LedshowTW图文编辑软件对控制器进行相关配置，比如控制器IP地址（串口号）、屏幕参数、扫描方式等，在使用LedshowTW软件能发送普通节目到控制器兵能显示正常后，在进行二次开发。</p>
<h2 id="14">1.4 常见问题<a class="headerlink" href="#14" title="Permanent link">&para;</a></h2>
<ul>
<li>关于表格 控制器不支持Excel或其他表格，所以，需要将表格转换成图片添加到区域中</li>
</ul>
<h1 id="2">2. 接口说明<a class="headerlink" href="#2" title="Permanent link">&para;</a></h1>
<h2 id="21-sdk">2.1 SDK初始化<a class="headerlink" href="#21-sdk" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="c1">// 五代控制器</span>
<span class="c1">// 初始化SDK</span>
<span class="c1">// 初始化有3种方法，如下</span>
<span class="n">Bx5GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">();</span>

<span class="n">Bx5GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">(</span><span class="s">&quot;log.properties&quot;</span><span class="p">);</span> <span class="c1">// log.properties是日志配置文件</span>

<span class="n">Bx6GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">(</span><span class="s">&quot;log.properties&quot;</span><span class="p">,</span><span class="mi">30000</span><span class="p">);</span><span class="c1">// 30000为通讯超时时间，单位是毫秒</span>

<span class="c1">// 六代控制卡</span>
<span class="c1">// 初始化SDK</span>
<span class="c1">// 初始化有3种方法，如下</span>
<span class="n">Bx6GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">();</span>

<span class="n">Bx6GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">(</span><span class="s">&quot;log.properties&quot;</span><span class="p">);</span><span class="c1">// log.properties是日志配置文件</span>

<span class="n">Bx6GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">(</span><span class="s">&quot;log.properties&quot;</span><span class="p">,</span><span class="mi">30000</span><span class="p">);</span><span class="c1">// 30000为通讯超时时间，单位是毫秒</span>
</code></pre></div>

<h2 id="22-screen">2.2 Screen类<a class="headerlink" href="#22-screen" title="Permanent link">&para;</a></h2>
<p>与控制器的所有交互都需要通过Bx5GScreen类或其子类来进行，其子类包括：
Bx5GScreenClient（客户端模式使用），Bx5GScreenRS（串口模式使用），Bx5GScreenServer（服务器模式使用）。
创建screen对象的通常代码如下：
<div class="codehilite"><pre><span></span><code><span class="c1">// 五代控制器</span>
<span class="c1">// 创建screen对象，用于对控制器进行访问，客户端模式</span>
<span class="n">Bx5GScreenClient</span> <span class="n">screen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bx5GScreenClient</span><span class="p">(</span><span class="s">&quot;MyScreen&quot;</span><span class="p">);</span>
<span class="c1">// 创建screen对象，用于对控制器进行访问，串口模式</span>
<span class="n">Bx5GScreenRS</span> <span class="n">screen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bx5GScreenRS</span><span class="p">(</span><span class="s">&quot;MyScreen&quot;</span><span class="p">);</span>

<span class="c1">// 六代控制器创建screen对象方法，以BX-6M系列为例</span>
<span class="c1">// Bx6M 为控制卡型号，只有型号对应才能通讯正常，否则会出现逾时未回应</span>
<span class="c1">// 如果使用的控制器型号在SDK中没有定义，则用Bx6M替代</span>
<span class="c1">// 创建screen对象，用于对控制器进行访问，客户端模式</span>
<span class="n">Bx6GScreenClient</span> <span class="n">screen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bx6GScreenClient</span><span class="p">(</span><span class="s">&quot;MyScreen&quot;</span><span class="p">,</span><span class="k">new</span> <span class="n">Bx6M</span><span class="p">());</span>
<span class="c1">// 创建screen对象，用于对控制器进行访问，串口模式</span>
<span class="n">Bx6GScreenRS</span> <span class="n">screen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bx6GScreenRS</span><span class="p">(</span><span class="s">&quot;MyScreen&quot;</span><span class="p">,</span><span class="k">new</span> <span class="n">Bx6M</span><span class="p">());</span>
</code></pre></div></p>
<h2 id="23">2.3 屏幕连接<a class="headerlink" href="#23" title="Permanent link">&para;</a></h2>
<p>在对控制器交互之前，需要先与控制器建立连接，代码如下：
<div class="codehilite"><pre><span></span><code><span class="c1">// 连接控制器</span>
<span class="c1">// 其中，192.168.100.199为控制器的实际IP地址，请根据实际情况填写</span>
<span class="c1">// 如果不知道控制器IP地址，请先使用LedshowTW软件设置IP地址，软件下载地址：https://www.onbonbx.com/download/165.html</span>
<span class="c1">// 端口号默认为5005</span>
<span class="c1">// 五代控制器和六代控制器屏幕连接方法一样</span>
<span class="n">screen</span><span class="p">.</span><span class="na">connect</span><span class="p">(</span><span class="s">&quot;192.168.100.199&quot;</span><span class="p">,</span><span class="mi">5005</span><span class="p">);</span>
</code></pre></div>
与控制器交互完成后，需断开与控制器之间的连接，其代码如下：
<div class="codehilite"><pre><span></span><code><span class="c1">// 断开与控制器之间的连接</span>
<span class="n">screen</span><span class="p">.</span><span class="na">disconnect</span><span class="p">();</span>
</code></pre></div></p>
<h2 id="24">2.4 屏幕控制<a class="headerlink" href="#24" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="c1">// 以下为一些简单控制命令的使用方法</span>
<span class="c1">// 开关机命令</span>
<span class="n">screen</span><span class="p">.</span><span class="na">turnOff</span><span class="p">();</span><span class="c1">// 关机</span>
<span class="n">screen</span><span class="p">.</span><span class="na">turnOn</span><span class="p">();</span><span class="c1">// 开机</span>
<span class="n">screen</span><span class="p">.</span><span class="na">syncTime</span><span class="p">();</span><span class="c1">// 校时</span>
<span class="n">screen</span><span class="p">.</span><span class="na">ping</span><span class="p">();</span><span class="c1">// ping命令</span>
<span class="c1">// 查询控制器状态</span>
<span class="n">screen</span><span class="p">.</span><span class="na">checkControllerStatus</span><span class="p">();</span>
<span class="c1">// 查询控制器当前固件版本</span>
<span class="n">screen</span><span class="p">.</span><span class="na">checkFirmware</span><span class="p">();</span>
<span class="c1">// 查询控制器内存</span>
<span class="n">screen</span><span class="p">.</span><span class="na">checkMemVolumes</span><span class="p">();</span>
<span class="c1">// 锁定屏幕当前画面</span>
<span class="n">screen</span><span class="p">.</span><span class="na">lock</span><span class="p">();</span>
<span class="c1">// 解除锁定屏幕当前画面</span>
<span class="n">screen</span><span class="p">.</span><span class="na">unlock</span><span class="p">();</span>
<span class="c1">// 通过以下接口回读控制器状态</span>
<span class="n">Bx5GScreen</span><span class="p">.</span><span class="na">Result</span><span class="o">&lt;</span><span class="n">ReturnControllersStatus</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">screen</span><span class="p">.</span><span class="na">checkControllerStatua</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isOK</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">ReturnControllerStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="na">reply</span><span class="p">;</span>
    <span class="n">status</span><span class="p">.</span><span class="na">getBrightness</span><span class="p">();</span><span class="c1">// 取得亮度值</span>
    <span class="n">status</span><span class="p">.</span><span class="na">getTemperature1</span><span class="p">();</span><span class="c1">// 取得温度传感器温度值</span>
    <span class="c1">// status还有很多接口，根据实际应用进行调用</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="n">ErrorType</span> <span class="n">error</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="na">getError</span><span class="p">();</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="25">2.5 节目与区域<a class="headerlink" href="#25" title="Permanent link">&para;</a></h2>
<p>节目主要用于组合屏幕上现实的内容，它由多个区域组成。控制器同一时间只能播放一个集美，它是控制器现实内容可以单独更新的最小单位。
以下，我们将按步骤创建一个节目，并将其发送到控制器进行显示
<div class="codehilite"><pre><span></span><code><span class="c1">// 创建节目文件</span>
<span class="c1">// 第二个参数为显示屏属性，具体可以参照Bx5GScreenProfile类</span>
<span class="n">Bx5GScreenProfile</span> <span class="n">profile</span> <span class="o">=</span> <span class="n">screen</span><span class="p">.</span><span class="na">getProfile</span><span class="p">();</span>
<span class="n">ProgramBxFile</span> <span class="n">p0</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProgramBxFile</span><span class="p">(</span><span class="s">&quot;P000&quot;</span><span class="p">,</span><span class="n">profile</span><span class="p">);</span>
<span class="c1">// 关于节目类的其他接口可以参考ProgramBxFile类</span>
</code></pre></div>
控制器支持的区域有很多种，例如：图文区、时间区、传感器区等。其中，最常用的是图文区。图文区可以支持显示文本和图片，文字或图片可以按数据也依次添加到图文区中，每页数据均可以设置特技方式，停留时间等属性
创建图文区的步骤大致如下：
创建TextCaptionBxArea对象
创建TextBxPage或ImageFileBxPage对象
将创建好的page对象添加到TextCaptionBxArea中
如下代码，创建一个文本区，并向这个区域中添加一个文本页
<div class="codehilite"><pre><span></span><code><span class="c1">// 创建一个图文区</span>
<span class="c1">// 参数为X、Y、width、heigth</span>
<span class="c1">// 注意区域左边和宽度高度，不要越界</span>
<span class="n">TextCaptionBxArea</span> <span class="n">area</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextCaptionBxArea</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">64</span><span class="p">);</span>
<span class="c1">// 创建一个数据页，并希望显示“仰邦科技”这几个字</span>
<span class="n">TextBxPage</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextBxPage</span><span class="p">(</span><span class="s">&quot;仰邦科技&quot;</span><span class="p">);</span>
<span class="c1">// 将page添加到area中</span>
<span class="n">area</span><span class="p">.</span><span class="na">addPage</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
<span class="c1">// 将图文区添加到节目中</span>
<span class="n">p0</span><span class="p">.</span><span class="na">addArea</span><span class="p">(</span><span class="n">area</span><span class="p">);</span>
</code></pre></div>
关于时间区
时间区的创建过程大致如下：
创建DateTimeBxArea对象
设置各时间单元显示格式
将DateTimeBxArea添加到节目中
<div class="codehilite"><pre><span></span><code><span class="c1">// 下面代码创建了一个时间区</span>
<span class="c1">// 注意：只需输入时间区的起始坐标，区域的宽度和高度SDK会根据字体和显示方式自动计算</span>
<span class="n">DateTimeBxArea</span> <span class="n">dtArea</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DateTimeBxArea</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">screen</span><span class="p">.</span><span class="na">getProfile</span><span class="p">());</span>
<span class="c1">// 设置字体</span>
<span class="n">dtArea</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="k">new</span> <span class="n">Font</span><span class="p">(</span><span class="s">&quot;宋体&quot;</span><span class="p">,</span><span class="n">Font</span><span class="p">.</span><span class="na">PLAIN</span><span class="p">,</span><span class="mi">12</span><span class="p">));</span>
<span class="c1">// 设置显示颜色</span>
<span class="n">dtArea</span><span class="p">.</span><span class="na">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">yellow</span><span class="p">);</span>
<span class="c1">// 多行显示还是单行显示</span>
<span class="n">dtArea</span><span class="p">.</span><span class="na">setMultiline</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="c1">// 年月日显示格式</span>
<span class="c1">// 如果不需要显示，设置为null</span>
<span class="n">dtArea</span><span class="p">.</span><span class="na">setDateStyle</span><span class="p">(</span><span class="n">DateStyle</span><span class="p">.</span><span class="na">YYY_MM_DD_1</span><span class="p">);</span>
<span class="n">dtArea</span><span class="p">.</span><span class="na">setTimeStyle</span><span class="p">(</span><span class="n">TimeStyle</span><span class="p">.</span><span class="na">HH_MM_SS_1</span><span class="p">);</span>
<span class="n">dtArea</span><span class="p">.</span><span class="na">setWeekStyle</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="c1">// 将时间区添加到节目中</span>
<span class="n">p0</span><span class="p">.</span><span class="na">addArea</span><span class="p">(</span><span class="n">dtArea</span><span class="p">);</span>
<span class="c1">// 关于DateTimeBxArea类的更多接口，请参考JAVADOC中相关类的说明</span>
</code></pre></div>
更新节目
<div class="codehilite"><pre><span></span><code><span class="c1">// 以下为更新节目命令</span>
<span class="n">screen</span><span class="p">.</span><span class="na">WriteProgram</span><span class="p">(</span><span class="n">p0</span><span class="p">);</span>
<span class="c1">// 更新节目还有很多命令，请参考JAVADOC</span>
</code></pre></div></p>
<h2 id="26">2.6 动态区<a class="headerlink" href="#26" title="Permanent link">&para;</a></h2>
<p>动态区是一种比较特殊的区域，其有以下几个主要特点：
* 更新次数没有限制
* 内容掉电不保存
* 独立于节目进行编辑
* 可以支持多个区域，且每个区域可以进行单独更新
* 可以和单个活多个节目绑定显示，即作为节目的一个区域进行显示
* 可以作为单独一个节目进行独立播放
* 灵活的控制方式：超时时间控制、是否立即显示灯</p>
<p>以下为动态区代码
<div class="codehilite"><pre><span></span><code>// 五代控制器动态区（BX-5E系列）
// BX-5E系列控制卡最高支持4个动态区，当屏幕上需要同时显示多个动态区时，动态区ID不可以相同
// DynamicBxRule(id,runMode,immediatePlay,timeout);
// runMode 运行模式
// 0:循环显示
// 1:显示完成后静止显示最后一页数据
// 2:循环显示，超过设定时间后数据仍未更新时不显示
// 3:循环显示，超过设定时间后数据仍未更新时显示Logo信息
// 4:循环显示，显示完最后一页后不再显示
// immediatePlay
// 0:与异步节目一起播放
// 1:异步节目停止播放，仅播放动态区
// 2:当播放完节目编号最高的异步节目后播放该动态区
DynamicBxAreaRule rule = new DynamicBxRule(0,(byte)0,(byte)1,0);
TextCaptionBxArea darea = new TextCaptionBxArea(0,0,160,64,screen.getProfile());
TextBxPage dapge = new TextBxPage(&quot;动态区123abc&quot;);
darea.addPage(dpage);
screen.writeDynamic(rule,darea);

// 六代控制器动态区
DynamicBxAreaRule rule = new DynamicBxAreaRule();
// 设定动态区ID，此处ID为0，多个动态区ID不能相同
rule.setId(0);
// 设定异步节目停止播放，仅播放动态区
// 0:动态区与异步节目一起播放
// 1:异步节目停止播放，仅播放动态区
// 2:当播放完节目编号最高的异步节目后播放该动态区
rule.setImmediatePlay((byte)1);
// 设定动态区循环播放
// 0:循环播放
// 1:显示完成后静置显示最后一页数据
// 2:循环显示，超过设定时间后仍未更新时不再显示
// 3:循环显示，超过设定时间后仍未更新时显示Logo信息
// 4:显示完成最后一页后就不再显示
rule.setRunMode((byte)0);
DynamicBxArea area = new DynamicBxArea(0,0,160,32,screen.getProfile());
TextBxPage page = new TextBxPage(&quot;动态区abc&quot;);
area.addPage(page);
screen.writeDynamic(rule,area);
</code></pre></div></p>
<h2 id="27-servergprs">2.7 Server模式（包含GPRS）<a class="headerlink" href="#27-servergprs" title="Permanent link">&para;</a></h2>
<p>Server使用流程如下：
* 初始化API（在一个进程内只需要初始化一次）
* 建立服务器
* 设定监听等待屏幕的连线与断线事件
* 关闭服务器</p>
<p>主要代码如下：
<div class="codehilite"><pre><span></span><code><span class="n">Bx5GEnv</span><span class="p">.</span><span class="na">initial</span><span class="p">();</span> <span class="c1">//初始化</span>
<span class="c1">// 建立服务器</span>
<span class="n">Bx5GServer</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bx5GServer</span><span class="p">(</span><span class="s">&quot;Hello Screen&quot;</span><span class="p">,</span> <span class="mi">8036</span><span class="p">);</span>
<span class="c1">// 添加监听</span>
<span class="n">server</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">new</span> <span class="n">ConnectionListener</span><span class="p">());</span>
<span class="c1">// 启动服务器</span>
<span class="n">server</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;waiting 30 secs&quot;</span><span class="p">);</span>
<span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">30000</span><span class="p">);</span>
<span class="c1">// 更新节目或者动态区</span>
<span class="c1">//</span>
<span class="c1">//</span>
<span class="c1">//</span>


<span class="c1">// 关闭服务器</span>
<span class="n">server</span><span class="p">.</span><span class="na">stop</span><span class="p">();</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;done!&quot;</span><span class="p">);</span>

<span class="c1">// 监听</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConnectionListener</span> <span class="kd">implements</span> <span class="n">Bx5GServerListener</span> <span class="p">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">connected</span><span class="p">(</span><span class="n">String</span> <span class="n">socketId</span><span class="p">,</span> <span class="n">String</span> <span class="n">controllerAddr</span><span class="p">,</span>
<span class="n">Bx5GScreen</span> <span class="n">screen</span><span class="p">)</span> <span class="p">{</span>
<span class="n">Result</span><span class="o">&lt;</span><span class="n">ReturnPingStatus</span><span class="o">&gt;</span> <span class="n">result1</span> <span class="o">=</span> <span class="n">screen</span><span class="p">.</span><span class="na">ping</span><span class="p">();</span>
<span class="n">Result</span><span class="o">&lt;</span><span class="n">ReturnControllerStatus</span><span class="o">&gt;</span> <span class="n">result2</span> <span class="o">=</span>
<span class="n">screen</span><span class="p">.</span><span class="na">checkControllerStatus</span><span class="p">();</span>
<span class="p">...</span>
<span class="p">}</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">disconnected</span><span class="p">(</span><span class="n">String</span> <span class="n">socketId</span><span class="p">,</span> <span class="n">String</span> <span class="n">controllerAddr</span><span class="p">,</span>
<span class="n">Bx5GScreen</span> <span class="n">screen</span><span class="p">)</span> <span class="p">{</span>
<span class="p">...</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright © 2020 onbon. All rights reserved. </p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/onbonlab/onbonlab.github.io.git/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" defer></script>
      <script src="../../../../js/my.js" defer></script>
      <script src="../../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
